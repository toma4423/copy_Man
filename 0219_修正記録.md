# copyMan v4 開発・修正記録

## 1. ドラッグアンドドロップ機能の修正

### 問題の概要
copyMan v4において、ディレクトリのドラッグアンドドロップ機能が正常に動作しない問題が発生。

### 発生していた問題
1. ドラッグアンドドロップ操作を受け付けない
2. ディレクトリをドロップしても選択リストに追加されない

### 修正内容
1. 専用の`DroppableQListWidget`クラスを作成
2. 各イベントハンドラ（`dragEnterEvent`, `dragMoveEvent`, `dropEvent`）を適切に実装
3. 重複チェックと既存ディレクトリの確認機能を追加

## 2. プロジェクト構造の改善

### Poetry対応
1. プロジェクトをPoetryで管理するように変更
   - `pyproject.toml`の作成
   - 依存関係の明確化（PyQt6など）
   - スクリプトエントリポイントの設定

2. モジュール構造の整理
   - `mod`パッケージの構造を改善
   ```
   mod/
   ├── __init__.py
   ├── copy_support/
   │   ├── __init__.py
   │   ├── main.py
   │   ├── win.py
   │   └── mac_linux.py
   └── toma_logger/
       ├── __init__.py
       └── logger.py
   ```

3. インポート文の修正
   ```python
   from mod.copy_support.main import CopyManager
   from mod.toma_logger.logger import TomaLogger
   ```

### バージョン管理の改善
1. `.gitignore`の整備
   - 不要なキャッシュファイルの除外
   - 環境依存ファイルの除外
   - IDE関連ファイルの除外

2. プロジェクトのバージョン管理
   - バージョン番号の明確化（v0.4.0）
   - 変更履歴の記録

## 3. 今後の改善点

### 機能面
1. エラーハンドリングの強化
   - 無効なディレクトリに対する処理
   - アクセス権限エラーの処理

2. ユーザーインターフェースの改善
   - ドラッグアンドドロップ操作の視覚的フィードバック
   - エラーメッセージの多言語対応

### 技術面
1. テスト環境の整備
   - 単体テストの追加
   - 結合テストの実装

2. CI/CD環境の構築
   - GitHub Actionsの導入
   - 自動テストの実行
   - 自動ビルドの設定

3. パフォーマンスの最適化
   - 大量のファイル処理時の効率化
   - メモリ使用量の最適化

### ドキュメント
1. READMEの充実
   - インストール手順の詳細化
   - 使用方法の説明追加
   - スクリーンショットの追加

2. APIドキュメントの整備
   - 各モジュールの説明
   - 関数・クラスのドキュメント
