# copyMan\_v3 README

`copyMan_v3`は、指定した複数のディレクトリを別のディレクトリにコピーするためのGUIアプリケーションです。直感的な操作で、簡単にディレクトリのコピーが行えます。

## 特徴

-   **複数ディレクトリ選択:** 複数のコピー元ディレクトリを一度に選択できます。
-   **履歴管理:** 選択したディレクトリの履歴を保存し、後で再利用できます。
-   **進捗表示:** コピーの進捗状況をプログレスバーとステータスバーで確認できます。
-   **キャンセル機能:** コピー作業を途中でキャンセルできます。
-   **ログ記録:** コピーの進行状況やエラーを詳細に記録します。
-   **エラーリトライ:** コピー時にエラーが発生した場合、設定された回数リトライします。
-   **並列コピー:** 複数のディレクトリを同時にコピーすることで高速化を図ります。（オプションで有効化）

## 使い方

1.  **アプリケーションの起動:** ダウンロードした「copyMan\_v3.exe」を実行してアプリケーションを起動します。
2.  **コピー元ディレクトリの選択:**
    -   「ディレクトリを選択」ボタンをクリックして、コピーしたいディレクトリを選択します。
    -   複数のディレクトリを選択可能です。
3.  **コピー先ディレクトリの選択:**
    -   「コピー先ディレクトリを選択」ボタンをクリックして、コピー先のディレクトリを選択します。
    -   または、エクスプローラーからディレクトリをコピー先ディレクトリ表示エリアにドラッグ＆ドロップします。
4.  **並列コピーの有効化（オプション）:**
    -   「並列コピーを有効にする」にチェックを入れると、複数のディレクトリを同時にコピーします。（高速化が期待できますが、システム負荷も高くなります。）
5.  **コピーの開始:**
    -   「作業を開始」ボタンをクリックすると、コピー処理が開始されます。
    -   プログレスバーで進行状況を確認できます。
    -   ステータスバーに詳細な状況が表示されます。
    -   「キャンセル」ボタンで、いつでも処理を中断できます。
6.  **履歴の保存・読み込み:**
    -   「履歴を保存」ボタンで、選択したディレクトリの履歴を保存できます。
    -   「履歴を読み込み」ボタンで、保存した履歴を読み込み、ディレクトリの選択を復元できます。

## 出力例

-   **ステータスバー:**
    -   `Copying D:\Source\Dir1 to E:\Destination\Dir1` (コピー中)
    -   `Copying: 10/100 (10.0%)` (コピーの進捗)
    -   `Error copying D:\Source\Dir2: [Errno 2] No such file or directory: 'D:\\Source\\Dir2\\file.txt'` (エラー発生時)
    -   `ディレクトリのコピーが完了しました。` (コピー完了)

-   **ログファイル (logs/copy\_manager.log):**
    ```
    INFO 2023-12-27 10:00:00,000 Copying D:\Source\Dir1 to E:\Destination\Dir1
    INFO 2023-12-27 10:00:00,500 Progress: 50/100 (50.0%)
    INFO 2023-12-27 10:00:01,000 Progress: 100/100 (100.0%)
    INFO 2023-12-27 10:00:01,000 Copy operation completed.
    ERROR 2023-12-27 10:00:02,000 Error copying D:\Source\Dir2: [Errno 2] No such file or directory: 'D:\\Source\\Dir2\\file.txt'
    INFO 2023-12-27 10:00:03,000 Copy canceled by user.
    ```

## 注意点

-   **管理者権限:** 不要
-   **自己責任:** コピーは、自己責任において実行してください。
-   **上書き:** コピー先に同名のディレクトリが存在する場合、スキップされます。
-   **コピー先と同一ディレクトリの選択禁止:** コピー先ディレクトリの中にコピー元ディレクトリを選択することはできません。
-   **並列コピー:** 並列コピーを有効にすると、複数のディレクトリが同時にコピーされます。システムによっては動作が遅くなることがあるため、その際は使用しないでください。

## 開発環境（参考情報）

このアプリケーションは、以下の技術を用いて開発されました。

-   **プログラミング言語:** Python
-   **ライブラリ:**
    -   PyQt6: GUIの構築
    -   **mod.copy\_support:** コピー処理、リトライ機能、進捗報告
        -   `main.py`: コピー処理を管理する`CopyManager`クラスを提供。プラットフォームに応じて`win.py`または`mac_linux.py`のクラスを呼び出す。
        -   `win.py`: Windows用の`WindowsCopy`クラスを提供。`robocopy`コマンドを使用してファイルのコピーを実行。
        -   `mac_linux.py`: macOS/Linux用の`MacLinuxCopy`クラスを提供。`rsync`コマンドを使用してファイルのコピーを実行。
    -   **mod.toma\_logger:** ログの記録
        -   `toma_logger.py`: `TomaLogger`クラスを提供。ログのフォーマット設定（テキスト、JSON、XML）、ファイルへの出力（日毎のローテーション）、コンソールへの出力などの機能を提供します。
    -   concurrent.futures: 並列処理
    -   os, sys, json, logging, xml: 標準ライブラリ
"# copy_Man" 
